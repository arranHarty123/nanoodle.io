<header class="masthead">
  <div class="section-heading text-center">
    <img src="../../assets/nanoodle_logo.svg" width="50px" class="img-fluid" alt="">
    <br>
    <h3>Live!</h3>
    <br>
  </div>
</header>
<section class="features" id="features">
  <div class="container h-100">
    <div class="row h-100">
      <div class="col-lg-12 my-auto">
        <ng-container *ngIf="blockCountResults; then blockCountLoaded; else blockCountLoading">
        </ng-container>
        <ng-template #blockCountLoaded>
          <p>The NANOODLE node is {{
            formatDecimals(+(+blockCountResults['count']/(+blockCountResults['count']++blockCountResults['unchecked']))*100,3)
            }}% in sync with the Nano network</p>
        </ng-template>
        <ng-template #blockCountLoading>
          <i class="fa fa-refresh fa-spin fa-lg fa-fw"></i>
        </ng-template>
        <ng-container *ngIf="lastPriceTime; then lastPriceTimeLoaded; else lastPriceTimeLoading">
        </ng-container>
        <ng-template #lastPriceTimeLoaded>
          <p>The last receipt of price data from CryptoCompare was at {{lastPriceTime}}</p>
        </ng-template>
        <ng-template #lastPriceTimeLoading>
          <i class="fa fa-refresh fa-spin fa-lg fa-fw"></i>
        </ng-template>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-12 my-auto">
        <h3>Live Transactions</h3>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-8 my-auto">
        <app-transactionGraph></app-transactionGraph>
      </div>
      <div class="col-lg-4 my-auto">
        <p>Number of Nano "value" transactions detected within a previous 15 second window; this chart is derived from
          the number of 'send' state blocks.</p>
        <p>An indicator of the current activity that should react to live events on the network.</p>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-12 my-auto">
        <h3>Hourly Transactions</h3>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-4 my-auto">
        <p>The number of Nano "value" transactions captured each hour; this chart is derived from the number of 'send'
          state blocks.</p>
        <p>Serves as a longer term indicator for how much Nano is being utilised for its core value transfer use case,
          and identify any daily/weekly patterns.</p>
      </div>
      <div class="col-lg-8 my-auto chart">
        <canvas baseChart #transactionChart='base-chart' [chartType]="'line'" [datasets]="transactionDatasets" [labels]="transactionLabels"
          [options]="chartOptions" [legend]="false" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-12 my-auto">
        <h3>Hourly Transactions Value</h3>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-8 my-auto">
        <canvas baseChart #currencyChart='base-chart' [chartType]="'line'" [datasets]="currencyDatasets" [labels]="transactionLabels"
          [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
      </div>
      <div class="col-lg-4 my-auto chart">
        <p>The sum total of Nano transferred each hour; this chart is derived from the number of 'send'
          state blocks and the amount of Nano transferred. The value of this Nano is also available in other
          currencies, based on the average rate of the other currency during this hour.</p>
        <p>Serves as a longer term indicator for how much value is being transferred on the Nano network.</p>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-12 my-auto">
        <h3>Hourly Price</h3>
      </div>
    </div>
    <div class="row h-100">
      <div class="col-lg-4 my-auto chart">
        <p>The average hourly rate at which Nano can be exchanged for other currencies.</p>
        <p>As there is a fixed (or even reducing) supply of Nano, in a simple market the price of Nano would move with
          its demand; this itself would increase with adoption. In reality, markets are more complex than this.</p>
      </div>
      <div class="col-lg-8 my-auto">
        <canvas baseChart #priceChart='base-chart' [chartType]="'line'" [datasets]="priceDatasets" [labels]="transactionLabels"
          [options]="chartOptions" [legend]="true" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)"></canvas>
      </div>

    </div>
  </div>
</section>